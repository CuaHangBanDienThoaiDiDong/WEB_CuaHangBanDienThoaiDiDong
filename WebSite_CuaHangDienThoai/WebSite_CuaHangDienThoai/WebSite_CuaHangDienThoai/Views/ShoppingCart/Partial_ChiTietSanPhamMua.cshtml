
@model IEnumerable<WebSite_CuaHangDienThoai.Models.ShoppingCartItem>
@using WebSite_CuaHangDienThoai.Common
@{


}
@if (Model != null && Model.Any())
{
    if (ViewBag.Count > 0)
    {
        <h3 class="mb-3 ">
            <a href="/gio-hang" class="text-white">
                <i class="fas fa-long-arrow-alt-left me-2"></i>Quay về giỏ hàng
            </a>
        </h3>
        <hr>

        <div class="bg-white rounded-top-3 ">
            <div class="p-2">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h3 class="mb-1  ">Đơn hàng</h3>
                        <p class="mb-0">Bạn có @ViewBag.Count sản phẩm trong đơn hàng</p>
                    </div>
                    <hr class="my-4">
                </div>

                <div class=" mb-3">
                    <div class="">
                        <div class="d-flex justify-content-between">
                            <div class="d-flex flex-row align-items-center">
                                <div class=" col-12 pt-3">


                                    <div class="row  d-flex justify-content-between align-items-center">
                                        @foreach (var item in Model)
                                        {


                                            var Capacity = "";
                                            string[] dungLuongOptions = new string[] { "1Tb", "2 Tb" };

                                            int[] nguongDungLuong = new int[] { 999, 1999 };

                                            int index = Array.FindIndex(nguongDungLuong, capacity => item.Capcity > capacity);

                                            Capacity = index != -1 ? dungLuongOptions[index] : item.Capcity + " Gb";




                                            byte[] strImg = null;


                                            if (item.ProductImg != null)
                                            {
                                                strImg = item.ProductImg;
                                            }

                                            string imgSrc = "";
                                            if (strImg != null && strImg.Length > 0)
                                            {
                                                string base64String = Convert.ToBase64String(strImg);
                                                imgSrc = $"data:image;base64,{base64String}";
                                            }




                                            <div class="row p-2 d-flex justify-content-between align-items-center">
                                                <div class="col-md-2 col-lg-2 col-xl-2 ">
                                                    <img src="@imgSrc"
                                                         class="img-fluid rounded-3 " style="width: 70%; height: 70%" alt="Cotton T-shirt">
                                                </div>
                                                <div class="col-md-3 col-lg-3 col-xl-3">
                                                    <h4 class="text-muted">@item.ProductName</h4>
                                                    <h5 class="text-black mb-0">@Capacity @item.Color</h5>
                                                </div>
                                                <div class="col-md-3 col-lg-3 col-xl-2 d-flex">
                                                    <button data-mdb-button-init data-mdb-ripple-init class="btn btn-link px-2"
                                                            onclick="this.parentNode.querySelector('input[type=number]').stepDown()">
                                                        <i class="fas fa-minus"></i>
                                                    </button>

                                                    <input id="form1" min="0" name="quantity" value="@item.SoLuong" type="number"
                                                           class="form-control form-control-sm" />

                                                    <button data-mdb-button-init data-mdb-ripple-init class="btn btn-link px-2"
                                                            onclick="this.parentNode.querySelector('input[type=number]').stepUp()">
                                                        <i class="fas fa-plus"></i>
                                                    </button>
                                                </div>
                                                <div class="col-md-3 col-lg-2 col-xl-2 offset-lg-1">
                                                    <h6 class="mb-0">@WebSite_CuaHangDienThoai.Common.Common.FormatNumber(item.Price, 0) vnđ</h6>
                                                </div>
                                                <div class="col-md-1 col-lg-1 col-xl-1 text-end">
                                                    <a href="#!" class="text-muted"><i class="fas fa-times" style="color:red"></i></a>
                                                </div>
                                                <hr class="my-4">
                                            </div>


                                        }
                                    </div>






                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>

    }
    else
    {
        <h5 class="mb-3 ">
            <a href="/gio-hang" class="text-white">
                <i class="fas fa-long-arrow-alt-left me-2"></i>Quay về giỏ hàng
            </a>
        </h5>
        <hr>

        <div class="bg-white rounded-top-3 ">
            <div class="p-2">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h3 class="mb-1  ">Đơn hàng</h3>
                        <p class="mb-0">Bạn chưa có sản phẩm trong đơn hàng</p>
                    </div>
                    <hr class="my-4">
                </div>

                <div class=" mb-3">
                    <div class="">
                        <div class="d-flex justify-content-between">
                            <div class="d-flex flex-row align-items-center">
                                <div class=" col-12 pt-3">
                                    <div class="row  d-flex justify-content-between align-items-center">
                                      <p class="text-danger">Không tồn tại bảng ghi nào !!!</p>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>

    }




}
else
{
    <p>Lỗi hệ thống</p>
}
