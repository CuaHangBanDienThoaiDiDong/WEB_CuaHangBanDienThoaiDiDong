@model IEnumerable<WebSite_CuaHangDienThoai.Models.tb_Message>
@if (Model != null)
{
    
    <div id="loadMess">
        @foreach (var item in Model)
        {
            var messCustomer = item.tb_CustomerMessageDetail.FirstOrDefault(x => x.MessageId == item.MessageId);

            if (messCustomer != null)
            {
                var latestContent = messCustomer.Content;
                <a href="#" class="list-group-item list-group-item-action border-0 show-messages" data-detailid="@item.MessageId">
                    <div class="badge bg-success float-right">5</div>
                    <div class="d-flex align-items-start">
                        @if (messCustomer.tb_Customer.Image != null)
                        {
                            <img src="data:image;base64,@Convert.ToBase64String(messCustomer.tb_Customer.Image)" alt="@messCustomer.tb_Customer.CustomerName" class="rounded-circle mr-1" width="40" height="40">
                        }
                        else
                        {
                            <img src="~/images/Logo/LogoWebpng.png" class="rounded-circle mr-1" alt="@messCustomer.tb_Customer.CustomerName" width="40" height="40">
                        }
                        <div class="flex-grow-1 ml-3">
                            @messCustomer.tb_Customer.CustomerName
                            @if (!string.IsNullOrEmpty(latestContent))
                            {
                                <div class="small">
                                    <span class="fas fa-circle chat-online"></span>
                                    @latestContent
                                </div>
                            }
                        </div>
                    </div>
                    <hr />
                </a>
            }
        }
    </div>
}
else
{
    <p class="text-danger">Không tồn tại bản ghi !!!</p>
}
